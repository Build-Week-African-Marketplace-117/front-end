(this["webpackJsonpcrud-app"]=this["webpackJsonpcrud-app"]||[]).push([[0],{102:function(e,t,n){},110:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(40),r=n.n(c),s=(n(102),n(3)),i=n(4),l=n(7),o=n(8),d=n(16),u=n(9),j=n(27),b=function(e){return{type:"INSERT_ITEM",payload:e}},m=function(e){return{type:"DELETE_ITEM",payload:e}},p=function(e){return{type:"UPDATE_ITEM",payload:e}},h=function(e){return{type:"UPDATE_INDEX",payload:e}},O=n(20),x=n(1),g=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state=Object(u.a)({},e.returnStateObj()),e.handleInputChange=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),-1===e.props.currentIndex?e.props.insertItem(e.state):e.props.updateItem(e.state)},e}return Object(i.a)(n,[{key:"returnStateObj",value:function(){return-1===this.props.currentIndex?{location:"",name:"",description:"",price:""}:this.props.list[this.props.currentIndex]}},{key:"componentDidUpdate",value:function(e){e.currentIndex===this.props.currentIndex&&e.list.length===this.props.list.length||this.setState(Object(u.a)({},this.returnStateObj()))}},{key:"render",value:function(){return Object(x.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",children:[Object(x.jsx)("input",{name:"location",placeholder:"location",value:this.state.location,onChange:this.handleInputChange})," ",Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"name",placeholder:"name",value:this.state.name,onChange:this.handleInputChange}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"price",placeholder:"price",value:this.state.price,onChange:this.handleInputChange}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"description",placeholder:"description",value:this.state.description,onChange:this.handleInputChange}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{type:"submit",children:"Add/Edit Item"})]})}}]),n}(a.Component),f=Object(j.b)((function(e){return{list:e.list,currentIndex:e.currentIndex}}),(function(e){return Object(O.a)({insertItem:b,updateItem:p},e)}))(g),v=n(96),N=(n(110),function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).handleEdit=function(t){e.props.updateIndex(t)},e.handleDelete=function(t){e.props.deleteItem(t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)(f,{}),Object(x.jsx)("br",{}),Object(x.jsx)("h1",{className:"list-title",children:"Market List"}),Object(x.jsxs)(v.a,{striped:!0,bordered:!0,hover:!0,children:[Object(x.jsxs)("thead",{children:[Object(x.jsx)("th",{children:"Location"}),Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Price"}),Object(x.jsx)("th",{children:"Description"})]}),Object(x.jsx)("tbody",{children:this.props.list.map((function(t,n){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.location}),Object(x.jsx)("td",{children:t.name}),Object(x.jsx)("td",{children:t.price}),Object(x.jsx)("td",{children:t.description}),Object(x.jsx)("button",{onClick:function(){return e.handleEdit(n)},children:"Edit"}),Object(x.jsx)("button",{onClick:function(){return e.handleDelete(n)},children:"Delete"})]},n)}))})]})]})}}]),n}(a.Component)),I=Object(j.b)((function(e){return{list:e.list}}),(function(e){return Object(O.a)({deleteItem:m,updateIndex:h},e)}))(N),y=n(15),S=n(18),w=n(28),E=(n(81),n(44)),k=n.n(E),C=n(6),P=w.a().shape({username:w.c().required("Username is required").min(4,"name must be at least 4 characters"),email:w.c().email("Must be a valid email address.").required("Email is required"),password:w.c().required("Password is required").min(8,"Password must be at least 8 characters and include both numbers and letters")});function D(){var e=Object(a.useState)({username:"",email:"",password:""}),t=Object(y.a)(e,2),n=t[0],c=t[1],r=Object(C.f)(),s=Object(a.useState)(!0),i=Object(y.a)(s,2),l=i[0],o=i[1],j=Object(a.useState)({username:"",email:"",password:""}),b=Object(y.a)(j,2),m=b[0],p=b[1],h=function(e){c(Object(u.a)(Object(u.a)({},n),{},Object(d.a)({},e.target.name,e.target.value)));var t=e.target;!function(e,t){w.b(P,e).validate(t).then((function(){return p(Object(u.a)(Object(u.a)({},m),{},Object(d.a)({},e,"")))})).catch((function(t){return p(Object(u.a)(Object(u.a)({},m),{},Object(d.a)({},e,t.errors[0])))}))}(t.name,t.value)};return Object(a.useEffect)((function(){P.isValid(n).then((function(e){return o(!e)}))}),[n]),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"row no-gutter",children:[Object(x.jsx)("div",{className:"d-none d-md-flex col-md-4 col-lg-6 bg-image"}),Object(x.jsx)("div",{className:"col-md-8 col-lg-6",children:Object(x.jsx)("div",{className:"login d-flex align-items-center py-5",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-md-9 col-lg-8 mx-auto",children:[Object(x.jsx)("h3",{className:"login-heading mb-4",children:"Welcome"}),Object(x.jsxs)("form",{className:"error-message",onSubmit:function(e){e.preventDefault();var t={username:n.username,email:n.email,password:n.password};k.a.post(" https://reqres.in/api/users/register",t).then((function(e){console.log(e.data),localStorage.setItem("id",e.data),r.push("/")})).catch((function(e){console.log(e)}))},children:[Object(x.jsxs)("div",{className:"form-label-group",children:[Object(x.jsx)("input",{onChange:h,type:"text",name:"username",value:n.username,id:"inputUserName",className:"form-control",placeholder:"Username",required:!0,autofocus:!0}),Object(x.jsx)("label",{for:"inputUserName",children:"Username"}),Object(x.jsx)("p",{children:m.username})]}),Object(x.jsxs)("div",{className:"form-label-group",children:[Object(x.jsx)("input",{onChange:h,type:"email",name:"email",value:n.email,id:"inputEmail",className:"form-control",placeholder:"Email",required:!0,autofocus:!0}),Object(x.jsx)("label",{for:"inputEmail",children:"Email"}),Object(x.jsx)("p",{children:m.email})]}),Object(x.jsxs)("div",{className:"form-label-group",children:[Object(x.jsx)("input",{onChange:h,name:"password",value:n.password,type:"text",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),Object(x.jsx)("label",{for:"inputPassword",children:"Password"}),Object(x.jsx)("p",{children:m.password})]}),Object(x.jsx)("button",{className:"btn btn-lg btn-warning btn-block btn-login text-uppercase font-weight-bold mb-2",type:"submit",disabled:l,children:"Sign Up"}),Object(x.jsxs)("div",{className:"text-center",children:[Object(x.jsx)("h4",{className:"small",children:"Already have an accout?"}),Object(x.jsx)(S.b,{to:"/sign-in",children:Object(x.jsx)("p",{className:"small",children:"Sign In"})})]})]})]})})})})})]})})}function T(){var e=Object(a.useState)({username:"",password:""}),t=Object(y.a)(e,2),n=t[0],c=t[1],r=Object(C.f)(),s=function(e){c(Object(u.a)(Object(u.a)({},n),{},Object(d.a)({},e.target.name,e.target.value)))},i={username:n.username,password:n.password};return Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"row no-gutter",children:[Object(x.jsx)("div",{className:"d-none d-md-flex col-md-4 col-lg-6 bg-image"}),Object(x.jsx)("div",{className:"col-md-8 col-lg-6",children:Object(x.jsx)("div",{className:"login d-flex align-items-center py-5",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-md-9 col-lg-8 mx-auto",children:[Object(x.jsx)("h3",{className:"login-heading mb-4",children:"Welcome back!"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k.a.post(" https://reqres.in/api/users/login",i).then((function(e){localStorage.setItem("id",e.data),r.push("/protected")})).catch((function(e){console.log("POST ERROR:",e)})),c(i)},children:[Object(x.jsxs)("div",{className:"form-label-group",children:[Object(x.jsx)("input",{onChange:s,type:"text",name:"username",id:"inputUserName",className:"form-control",placeholder:"Username",required:!0,autofocus:!0}),Object(x.jsx)("label",{for:"inputUserName",children:"Username"})]}),Object(x.jsxs)("div",{className:"form-label-group",children:[Object(x.jsx)("input",{onChange:s,name:"password",type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),Object(x.jsx)("label",{for:"inputPassword",children:"Password"})]}),Object(x.jsx)("button",{className:"btn btn-lg btn-warning btn-block btn-login text-uppercase font-weight-bold mb-2",type:"submit",children:"Sign in"}),Object(x.jsxs)("div",{className:"text-center",children:[Object(x.jsx)("h4",{className:"small",children:"New to African Marketplace?"}),Object(x.jsx)(S.b,{to:"/sign-up",children:Object(x.jsx)("p",{className:"small",children:"Sign Up"})})]})]})]})})})})})]})})}var U=n(97),q=function(e){var t=e.component,n=Object(U.a)(e,["component"]);return Object(x.jsx)(C.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return localStorage.getItem("token")?(console.log("token found, rendering component"),Object(x.jsx)(t,Object(u.a)({},e))):(console.log("no token found, redirect to login"),Object(x.jsx)(C.a,{to:"/login"}))}}))};n(230);var A=function(){return Object(x.jsx)(S.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(C.b,{exact:!0,path:"/",component:T}),Object(x.jsx)(C.b,{exact:!0,path:"/sign-up",component:D}),Object(x.jsx)(q,{exact:!0,path:"/protected",children:Object(x.jsx)(I,{})})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,232)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},J=function(e,t){var n=JSON.parse(localStorage.getItem("token"));switch(t.type){case"INSERT_ITEM":return n.push(t.payload),localStorage.setItem("token",JSON.stringify(n)),{list:n,currentIndex:-1};case"DELETE_ITEM":return n.splice(t.payload,1),localStorage.setItem("token",JSON.stringify(n)),{list:n,currentIndex:-1};case"UPDATE_ITEM":return n[e.currentIndex]=t.payload,localStorage.setItem("token",JSON.stringify(n)),{list:n,currentIndex:-1};case"UPDATE_INDEX":return{list:n,currentIndex:t.payload};default:return e}};null===localStorage.getItem("token")&&localStorage.setItem("token",JSON.stringify([]));var _={currentIndex:-1,list:JSON.parse(localStorage.getItem("token"))},L=Object(O.b)(J,_);r.a.render(Object(x.jsx)(j.a,{store:L,children:Object(x.jsx)(A,{})}),document.getElementById("root")),M()},81:function(e,t,n){}},[[231,1,2]]]);
//# sourceMappingURL=main.9e93b099.chunk.js.map